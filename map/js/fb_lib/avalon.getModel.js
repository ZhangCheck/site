define(["avalon"],function(avalon){function getChildVM(expr,vm,strLen){for(var pre,_t,t=vm,i=0,len=expr.length;len>i;i++){var k=expr[i];_t=t.$model||t;if("undefined"==typeof _t[k])return;pre=t;t=t[k]}return strLen>1?pre[k]:pre}avalon.getModel=function(expr,vmodels){if(!expr)return null;var str=expr.split("."),strLen=str.length,last=str[strLen-1];1!=str.length&&str.pop();for(var i=0,len=vmodels.length;len>i;i++){var ancestor=vmodels[i],child=getChildVM(str,ancestor,strLen);if("undefined"!=typeof child&&(child.hasOwnProperty(last)||Object.prototype.hasOwnProperty.call(child,last)))return[last,child,ancestor]}return null};return avalon});