define(["require","./Base","../tool/math","../tool/util"],function(require){var Base=require("./Base"),Trochoid=function(options){this.brushTypeOnly="stroke";Base.call(this,options)};Trochoid.prototype={type:"trochoid",buildPath:function(ctx,style){var _x1,_y1,_x2,_y2,_R=style.r,_r=style.r0,_d=style.d,_offsetX=style.x,_offsetY=style.y,_delta="out"==style.location?1:-1,_math=require("../tool/math");if(style.location&&_r>=_R)alert("参数错误");else{var _theta,_num=0,i=1;_x1=(_R+_delta*_r)*_math.cos(0)-_delta*_d*_math.cos(0)+_offsetX;_y1=(_R+_delta*_r)*_math.sin(0)-_d*_math.sin(0)+_offsetY;ctx.moveTo(_x1,_y1);do _num++;while(_r*_num%(_R+_delta*_r)!==0);do{_theta=Math.PI/180*i;_x2=(_R+_delta*_r)*_math.cos(_theta)-_delta*_d*_math.cos((_R/_r+_delta)*_theta)+_offsetX;_y2=(_R+_delta*_r)*_math.sin(_theta)-_d*_math.sin((_R/_r+_delta)*_theta)+_offsetY;ctx.lineTo(_x2,_y2);i++}while(_r*_num/(_R+_delta*_r)*360>=i)}},getRect:function(style){if(style.__rect)return style.__rect;var lineWidth,_R=style.r,_r=style.r0,_d=style.d,_delta="out"==style.location?1:-1,_s=_R+_d+_delta*_r,_offsetX=style.x,_offsetY=style.y;lineWidth="stroke"==style.brushType||"fill"==style.brushType?style.lineWidth||1:0;style.__rect={x:-_s-lineWidth+_offsetX,y:-_s-lineWidth+_offsetY,width:2*_s+2*lineWidth,height:2*_s+2*lineWidth};return style.__rect}};require("../tool/util").inherits(Trochoid,Base);return Trochoid});