define(["require","./Base","../tool/util","../tool/color","../tool/area","../shape/Sector"],function(require){function Spin(options){Base.call(this,options)}var Base=require("./Base"),util=require("../tool/util"),zrColor=require("../tool/color"),zrArea=require("../tool/area"),SectorShape=require("../shape/Sector");util.inherits(Spin,Base);Spin.prototype._start=function(addShapeHandle,refreshHandle){var options=util.merge(this.options,{textStyle:{color:"#fff",textAlign:"start"},backgroundColor:"rgba(0, 0, 0, 0.8)"}),textShape=this.createTextShape(options.textStyle),textGap=10,textWidth=zrArea.getTextWidth(textShape.highlightStyle.text,textShape.highlightStyle.textFont),textHeight=zrArea.getTextHeight(textShape.highlightStyle.text,textShape.highlightStyle.textFont),effectOption=util.merge(this.options.effect||{},{r0:9,r:15,n:18,color:"#fff",timeInterval:100}),location=this.getLocation(this.options.textStyle,textWidth+textGap+2*effectOption.r,Math.max(2*effectOption.r,textHeight));effectOption.x=location.x+effectOption.r;effectOption.y=textShape.highlightStyle.y=location.y+location.height/2;textShape.highlightStyle.x=effectOption.x+effectOption.r+textGap;for(var background=this.createBackgroundShape(options.backgroundColor),n=effectOption.n,x=effectOption.x,y=effectOption.y,r0=effectOption.r0,r=effectOption.r,color=effectOption.color,shapeList=[],preAngle=Math.round(180/n),i=0;n>i;i++)shapeList[i]=new SectorShape({highlightStyle:{x:x,y:y,r0:r0,r:r,startAngle:preAngle*i*2,endAngle:preAngle*i*2+preAngle,color:zrColor.alpha(color,(i+1)/n),brushType:"fill"}});var pos=[0,x,y];return setInterval(function(){addShapeHandle(background);pos[0]-=.3;for(var i=0;n>i;i++){shapeList[i].rotation=pos;addShapeHandle(shapeList[i])}addShapeHandle(textShape);refreshHandle()},effectOption.timeInterval)};return Spin});