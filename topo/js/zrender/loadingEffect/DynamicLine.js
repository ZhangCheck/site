define(["require","./Base","../tool/util","../tool/color","../shape/Line"],function(require){function DynamicLine(options){Base.call(this,options)}var Base=require("./Base"),util=require("../tool/util"),zrColor=require("../tool/color"),LineShape=require("../shape/Line");util.inherits(DynamicLine,Base);DynamicLine.prototype._start=function(addShapeHandle,refreshHandle){for(var options=util.merge(this.options,{textStyle:{color:"#fff"},backgroundColor:"rgba(0, 0, 0, 0.8)",effectOption:{n:30,lineWidth:1,color:"random",timeInterval:100}}),textShape=this.createTextShape(options.textStyle),background=this.createBackgroundShape(options.backgroundColor),effectOption=options.effectOption,n=effectOption.n,lineWidth=effectOption.lineWidth,shapeList=[],canvasWidth=this.canvasWidth,canvasHeight=this.canvasHeight,i=0;n>i;i++){var xStart=-Math.ceil(1e3*Math.random()),len=Math.ceil(400*Math.random()),pos=Math.ceil(Math.random()*canvasHeight),color="random"==effectOption.color?zrColor.random():effectOption.color;shapeList[i]=new LineShape({highlightStyle:{xStart:xStart,yStart:pos,xEnd:xStart+len,yEnd:pos,strokeColor:color,lineWidth:lineWidth},animationX:Math.ceil(100*Math.random()),len:len})}return setInterval(function(){addShapeHandle(background);for(var i=0;n>i;i++){var style=shapeList[i].highlightStyle;if(style.xStart>=canvasWidth){shapeList[i].len=Math.ceil(400*Math.random());style.xStart=-400;style.xEnd=-400+shapeList[i].len;style.yStart=Math.ceil(Math.random()*canvasHeight);style.yEnd=style.yStart}style.xStart+=shapeList[i].animationX;style.xEnd+=shapeList[i].animationX;addShapeHandle(shapeList[i])}addShapeHandle(textShape);refreshHandle()},effectOption.timeInterval)};return DynamicLine});