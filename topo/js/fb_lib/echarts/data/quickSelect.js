define(["require"],function(require){function defaultCompareFunc(a,b){return a-b}function swapElement(list,idx0,idx1){var tmp=list[idx0];list[idx0]=list[idx1];list[idx1]=tmp}function select(list,left,right,nth,compareFunc){for(var pivotIdx=left;right>left;){var pivotIdx=Math.round((right+left)/2),pivotValue=list[pivotIdx];swapElement(list,pivotIdx,right);pivotIdx=left;for(var i=left;right-1>=i;i++)if(compareFunc(pivotValue,list[i])>=0){swapElement(list,i,pivotIdx);pivotIdx++}swapElement(list,right,pivotIdx);if(pivotIdx===nth)return pivotIdx;nth>pivotIdx?left=pivotIdx+1:right=pivotIdx-1}return left}function quickSelect(list,left,right,nth,compareFunc){if(arguments.length<=3){nth=left;compareFunc=2==arguments.length?defaultCompareFunc:right;left=0;right=list.length-1}return select(list,left,right,nth,compareFunc)}return quickSelect});