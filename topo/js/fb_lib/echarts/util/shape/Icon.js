define(["require","zrender/tool/util","zrender/shape/Star","zrender/shape/Heart","zrender/shape/Droplet","zrender/shape/Image","zrender/shape/Base","zrender/shape/Image"],function(require){function _iconMark(ctx,style){var x=style.x,y=style.y,dx=style.width/16,dy=style.height/16;ctx.moveTo(x,y+style.height);ctx.lineTo(x+5*dx,y+14*dy);ctx.lineTo(x+style.width,y+3*dy);ctx.lineTo(x+13*dx,y);ctx.lineTo(x+2*dx,y+11*dy);ctx.lineTo(x,y+style.height);ctx.moveTo(x+6*dx,y+10*dy);ctx.lineTo(x+14*dx,y+2*dy);ctx.moveTo(x+10*dx,y+13*dy);ctx.lineTo(x+style.width,y+13*dy);ctx.moveTo(x+13*dx,y+10*dy);ctx.lineTo(x+13*dx,y+style.height)}function _iconMarkUndo(ctx,style){var x=style.x,y=style.y,dx=style.width/16,dy=style.height/16;ctx.moveTo(x,y+style.height);ctx.lineTo(x+5*dx,y+14*dy);ctx.lineTo(x+style.width,y+3*dy);ctx.lineTo(x+13*dx,y);ctx.lineTo(x+2*dx,y+11*dy);ctx.lineTo(x,y+style.height);ctx.moveTo(x+6*dx,y+10*dy);ctx.lineTo(x+14*dx,y+2*dy);ctx.moveTo(x+10*dx,y+13*dy);ctx.lineTo(x+style.width,y+13*dy)}function _iconMarkClear(ctx,style){var x=style.x,y=style.y,dx=style.width/16,dy=style.height/16;ctx.moveTo(x+4*dx,y+15*dy);ctx.lineTo(x+9*dx,y+13*dy);ctx.lineTo(x+14*dx,y+8*dy);ctx.lineTo(x+11*dx,y+5*dy);ctx.lineTo(x+6*dx,y+10*dy);ctx.lineTo(x+4*dx,y+15*dy);ctx.moveTo(x+5*dx,y);ctx.lineTo(x+11*dx,y);ctx.moveTo(x+5*dx,y+dy);ctx.lineTo(x+11*dx,y+dy);ctx.moveTo(x,y+2*dy);ctx.lineTo(x+style.width,y+2*dy);ctx.moveTo(x,y+5*dy);ctx.lineTo(x+3*dx,y+style.height);ctx.lineTo(x+13*dx,y+style.height);ctx.lineTo(x+style.width,y+5*dy)}function _iconDataZoom(ctx,style){var x=style.x,y=style.y,dx=style.width/16,dy=style.height/16;ctx.moveTo(x,y+3*dy);ctx.lineTo(x+6*dx,y+3*dy);ctx.moveTo(x+3*dx,y);ctx.lineTo(x+3*dx,y+6*dy);ctx.moveTo(x+3*dx,y+8*dy);ctx.lineTo(x+3*dx,y+style.height);ctx.lineTo(x+style.width,y+style.height);ctx.lineTo(x+style.width,y+3*dy);ctx.lineTo(x+8*dx,y+3*dy)}function _iconDataZoomReset(ctx,style){var x=style.x,y=style.y,dx=style.width/16,dy=style.height/16;ctx.moveTo(x+6*dx,y);ctx.lineTo(x+2*dx,y+3*dy);ctx.lineTo(x+6*dx,y+6*dy);ctx.moveTo(x+2*dx,y+3*dy);ctx.lineTo(x+14*dx,y+3*dy);ctx.lineTo(x+14*dx,y+11*dy);ctx.moveTo(x+2*dx,y+5*dy);ctx.lineTo(x+2*dx,y+13*dy);ctx.lineTo(x+14*dx,y+13*dy);ctx.moveTo(x+10*dx,y+10*dy);ctx.lineTo(x+14*dx,y+13*dy);ctx.lineTo(x+10*dx,y+style.height)}function _iconRestore(ctx,style){var x=style.x,y=style.y,dx=style.width/16,dy=style.height/16,r=style.width/2;ctx.lineWidth=1.5;ctx.arc(x+r,y+r,r-dx,0,2*Math.PI/3);ctx.moveTo(x+3*dx,y+style.height);ctx.lineTo(x+0*dx,y+12*dy);ctx.lineTo(x+5*dx,y+11*dy);ctx.moveTo(x,y+8*dy);ctx.arc(x+r,y+r,r-dx,Math.PI,5*Math.PI/3);ctx.moveTo(x+13*dx,y);ctx.lineTo(x+style.width,y+4*dy);ctx.lineTo(x+11*dx,y+5*dy)}function _iconLineChart(ctx,style){var x=style.x,y=style.y,dx=style.width/16,dy=style.height/16;ctx.moveTo(x,y);ctx.lineTo(x,y+style.height);ctx.lineTo(x+style.width,y+style.height);ctx.moveTo(x+2*dx,y+14*dy);ctx.lineTo(x+7*dx,y+6*dy);ctx.lineTo(x+11*dx,y+11*dy);ctx.lineTo(x+15*dx,y+2*dy)}function _iconBarChart(ctx,style){var x=style.x,y=style.y,dx=style.width/16,dy=style.height/16;ctx.moveTo(x,y);ctx.lineTo(x,y+style.height);ctx.lineTo(x+style.width,y+style.height);ctx.moveTo(x+3*dx,y+14*dy);ctx.lineTo(x+3*dx,y+6*dy);ctx.lineTo(x+4*dx,y+6*dy);ctx.lineTo(x+4*dx,y+14*dy);ctx.moveTo(x+7*dx,y+14*dy);ctx.lineTo(x+7*dx,y+2*dy);ctx.lineTo(x+8*dx,y+2*dy);ctx.lineTo(x+8*dx,y+14*dy);ctx.moveTo(x+11*dx,y+14*dy);ctx.lineTo(x+11*dx,y+9*dy);ctx.lineTo(x+12*dx,y+9*dy);ctx.lineTo(x+12*dx,y+14*dy)}function _iconPieChart(ctx,style){var x=style.x,y=style.y,width=style.width-2,height=style.height-2,r=Math.min(width,height)/2;y+=2;ctx.moveTo(x+r+3,y+r-3);ctx.arc(x+r+3,y+r-3,r-1,0,-Math.PI/2,!0);ctx.lineTo(x+r+3,y+r-3);ctx.moveTo(x+r,y);ctx.lineTo(x+r,y+r);ctx.arc(x+r,y+r,r,-Math.PI/2,2*Math.PI,!0);ctx.lineTo(x+r,y+r);ctx.lineWidth=1.5}function _iconFunnelChart(ctx,style){var x=style.x,y=style.y,dx=style.width/16,dy=style.height/16;y-=dy;ctx.moveTo(x+1*dx,y+2*dy);ctx.lineTo(x+15*dx,y+2*dy);ctx.lineTo(x+14*dx,y+3*dy);ctx.lineTo(x+2*dx,y+3*dy);ctx.moveTo(x+3*dx,y+6*dy);ctx.lineTo(x+13*dx,y+6*dy);ctx.lineTo(x+12*dx,y+7*dy);ctx.lineTo(x+4*dx,y+7*dy);ctx.moveTo(x+5*dx,y+10*dy);ctx.lineTo(x+11*dx,y+10*dy);ctx.lineTo(x+10*dx,y+11*dy);ctx.lineTo(x+6*dx,y+11*dy);ctx.moveTo(x+7*dx,y+14*dy);ctx.lineTo(x+9*dx,y+14*dy);ctx.lineTo(x+8*dx,y+15*dy);ctx.lineTo(x+7*dx,y+15*dy)}function _iconForceChart(ctx,style){var x=style.x,y=style.y,width=style.width,height=style.height,dx=width/16,dy=height/16,r=2*Math.min(dx,dy);ctx.moveTo(x+dx+r,y+dy+r);ctx.arc(x+dx,y+dy,r,Math.PI/4,3*Math.PI);ctx.lineTo(x+7*dx-r,y+6*dy-r);ctx.arc(x+7*dx,y+6*dy,r,Math.PI/4*5,4*Math.PI);ctx.arc(x+7*dx,y+6*dy,r/2,Math.PI/4*5,4*Math.PI);ctx.moveTo(x+7*dx-r/2,y+6*dy+r);ctx.lineTo(x+dx+r,y+14*dy-r);ctx.arc(x+dx,y+14*dy,r,-Math.PI/4,2*Math.PI);ctx.moveTo(x+7*dx+r/2,y+6*dy);ctx.lineTo(x+14*dx-r,y+10*dy-r/2);ctx.moveTo(x+16*dx,y+10*dy);ctx.arc(x+14*dx,y+10*dy,r,0,3*Math.PI);ctx.lineWidth=1.5}function _iconChordChart(ctx,style){var x=style.x,y=style.y,width=style.width,height=style.height,r=Math.min(width,height)/2;ctx.moveTo(x+width,y+height/2);ctx.arc(x+r,y+r,r,0,2*Math.PI);ctx.arc(x+r,y,r,Math.PI/4,Math.PI/5*4);ctx.arc(x,y+r,r,-Math.PI/3,Math.PI/3);ctx.arc(x+width,y+height,r,Math.PI,Math.PI/2*3);ctx.lineWidth=1.5}function _iconStackChart(ctx,style){for(var x=style.x,y=style.y,width=style.width,height=style.height,dy=Math.round(height/3),delta=Math.round((dy-2)/2),len=3;len--;)ctx.rect(x,y+dy*len+delta,width,2)}function _iconTiledChart(ctx,style){for(var x=style.x,y=style.y,width=style.width,height=style.height,dx=Math.round(width/3),delta=Math.round((dx-2)/2),len=3;len--;)ctx.rect(x+dx*len+delta,y,2,height)}function _iconDataView(ctx,style){var x=style.x,y=style.y,dx=style.width/16;ctx.moveTo(x+dx,y);ctx.lineTo(x+dx,y+style.height);ctx.lineTo(x+15*dx,y+style.height);ctx.lineTo(x+15*dx,y);ctx.lineTo(x+dx,y);ctx.moveTo(x+3*dx,y+3*dx);ctx.lineTo(x+13*dx,y+3*dx);ctx.moveTo(x+3*dx,y+6*dx);ctx.lineTo(x+13*dx,y+6*dx);ctx.moveTo(x+3*dx,y+9*dx);ctx.lineTo(x+13*dx,y+9*dx);ctx.moveTo(x+3*dx,y+12*dx);ctx.lineTo(x+9*dx,y+12*dx)}function _iconSave(ctx,style){var x=style.x,y=style.y,dx=style.width/16,dy=style.height/16;ctx.moveTo(x,y);ctx.lineTo(x,y+style.height);ctx.lineTo(x+style.width,y+style.height);ctx.lineTo(x+style.width,y);ctx.lineTo(x,y);ctx.moveTo(x+4*dx,y);ctx.lineTo(x+4*dx,y+8*dy);ctx.lineTo(x+12*dx,y+8*dy);ctx.lineTo(x+12*dx,y);ctx.moveTo(x+6*dx,y+11*dy);ctx.lineTo(x+6*dx,y+13*dy);ctx.lineTo(x+10*dx,y+13*dy);ctx.lineTo(x+10*dx,y+11*dy);ctx.lineTo(x+6*dx,y+11*dy)}function _iconCross(ctx,style){var x=style.x,y=style.y,width=style.width,height=style.height;ctx.moveTo(x,y+height/2);ctx.lineTo(x+width,y+height/2);ctx.moveTo(x+width/2,y);ctx.lineTo(x+width/2,y+height)}function _iconCircle(ctx,style){var width=style.width/2,height=style.height/2,r=Math.min(width,height);ctx.moveTo(style.x+width+r,style.y+height);ctx.arc(style.x+width,style.y+height,r,0,2*Math.PI);ctx.closePath()}function _iconRectangle(ctx,style){ctx.rect(style.x,style.y,style.width,style.height);ctx.closePath()}function _iconTriangle(ctx,style){var width=style.width/2,height=style.height/2,x=style.x+width,y=style.y+height,symbolSize=Math.min(width,height);ctx.moveTo(x,y-symbolSize);ctx.lineTo(x+symbolSize,y+symbolSize);ctx.lineTo(x-symbolSize,y+symbolSize);ctx.lineTo(x,y-symbolSize);ctx.closePath()}function _iconDiamond(ctx,style){var width=style.width/2,height=style.height/2,x=style.x+width,y=style.y+height,symbolSize=Math.min(width,height);ctx.moveTo(x,y-symbolSize);ctx.lineTo(x+symbolSize,y);ctx.lineTo(x,y+symbolSize);ctx.lineTo(x-symbolSize,y);ctx.lineTo(x,y-symbolSize);ctx.closePath()}function _iconArrow(ctx,style){var x=style.x,y=style.y,dx=style.width/16;ctx.moveTo(x+8*dx,y);ctx.lineTo(x+dx,y+style.height);ctx.lineTo(x+8*dx,y+style.height/4*3);ctx.lineTo(x+15*dx,y+style.height);ctx.lineTo(x+8*dx,y);ctx.closePath()}function _iconStar(ctx,style){var StarShape=require("zrender/shape/Star"),width=style.width/2,height=style.height/2;StarShape.prototype.buildPath(ctx,{x:style.x+width,y:style.y+height,r:Math.min(width,height),n:style.n||5})}function _iconHeart(ctx,style){var HeartShape=require("zrender/shape/Heart");HeartShape.prototype.buildPath(ctx,{x:style.x+style.width/2,y:style.y+.2*style.height,a:style.width/2,b:.8*style.height})}function _iconDroplet(ctx,style){var DropletShape=require("zrender/shape/Droplet");DropletShape.prototype.buildPath(ctx,{x:style.x+.5*style.width,y:style.y+.5*style.height,a:.5*style.width,b:.8*style.height})}function _iconPin(ctx,style){var x=style.x,y=style.y-style.height/2*1.5,width=style.width/2,height=style.height/2,r=Math.min(width,height);ctx.arc(x+width,y+height,r,Math.PI/5*4,Math.PI/5);ctx.lineTo(x+width,y+height+1.5*r);ctx.closePath()}function _iconImage(ctx,style,refreshNextFrame){var ImageShape=require("zrender/shape/Image");this._imageShape=this._imageShape||new ImageShape({style:{}});for(var name in style)this._imageShape.style[name]=style[name];this._imageShape.brush(ctx,!1,refreshNextFrame)}function Icon(options){Base.call(this,options)}var zrUtil=require("zrender/tool/util"),Base=require("zrender/shape/Base");Icon.prototype={type:"icon",iconLibrary:{mark:_iconMark,markUndo:_iconMarkUndo,markClear:_iconMarkClear,dataZoom:_iconDataZoom,dataZoomReset:_iconDataZoomReset,restore:_iconRestore,lineChart:_iconLineChart,barChart:_iconBarChart,pieChart:_iconPieChart,funnelChart:_iconFunnelChart,forceChart:_iconForceChart,chordChart:_iconChordChart,stackChart:_iconStackChart,tiledChart:_iconTiledChart,dataView:_iconDataView,saveAsImage:_iconSave,cross:_iconCross,circle:_iconCircle,rectangle:_iconRectangle,triangle:_iconTriangle,diamond:_iconDiamond,arrow:_iconArrow,star:_iconStar,heart:_iconHeart,droplet:_iconDroplet,pin:_iconPin,image:_iconImage},brush:function(ctx,isHighlight,refreshNextFrame){var style=isHighlight?this.highlightStyle:this.style;style=style||{};var iconType=style.iconType||this.style.iconType;if("image"===iconType){var ImageShape=require("zrender/shape/Image");ImageShape.prototype.brush.call(this,ctx,isHighlight,refreshNextFrame)}else{var style=this.beforeBrush(ctx,isHighlight);ctx.beginPath();this.buildPath(ctx,style,refreshNextFrame);switch(style.brushType){case"both":ctx.fill();case"stroke":style.lineWidth>0&&ctx.stroke();break;default:ctx.fill()}this.drawText(ctx,style,this.style);this.afterBrush(ctx)}},buildPath:function(ctx,style,refreshNextFrame){if(this.iconLibrary[style.iconType])this.iconLibrary[style.iconType].call(this,ctx,style,refreshNextFrame);else{ctx.moveTo(style.x,style.y);ctx.lineTo(style.x+style.width,style.y);ctx.lineTo(style.x+style.width,style.y+style.height);ctx.lineTo(style.x,style.y+style.height);ctx.lineTo(style.x,style.y);ctx.closePath()}},getRect:function(style){if(style.__rect)return style.__rect;style.__rect={x:Math.round(style.x),y:Math.round(style.y-("pin"==style.iconType?style.height/2*1.5:0)),width:style.width,height:style.height*("pin"===style.iconType?1.25:1)};return style.__rect},isCover:function(x,y){var originPos=this.transformCoordToLocal(x,y);x=originPos[0];y=originPos[1];var rect=this.style.__rect;rect||(rect=this.style.__rect=this.getRect(this.style));var delta=rect.height<8||rect.width<8?4:0;return x>=rect.x-delta&&x<=rect.x+rect.width+delta&&y>=rect.y-delta&&y<=rect.y+rect.height+delta}};zrUtil.inherits(Icon,Base);return Icon});