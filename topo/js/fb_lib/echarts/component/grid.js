define(["require","./base","zrender/shape/Rectangle","../config","zrender/tool/util","../component"],function(require){function Grid(ecTheme,messageCenter,zr,option,myChart){Base.call(this,ecTheme,messageCenter,zr,option,myChart);this.refresh(option)}var Base=require("./base"),RectangleShape=require("zrender/shape/Rectangle"),ecConfig=require("../config");ecConfig.grid={zlevel:0,z:0,x:80,y:60,x2:80,y2:60,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"};var zrUtil=require("zrender/tool/util");Grid.prototype={type:ecConfig.COMPONENT_TYPE_GRID,getX:function(){return this._x},getY:function(){return this._y},getWidth:function(){return this._width},getHeight:function(){return this._height},getXend:function(){return this._x+this._width},getYend:function(){return this._y+this._height},getArea:function(){return{x:this._x,y:this._y,width:this._width,height:this._height}},getBbox:function(){return[[this._x,this._y],[this.getXend(),this.getYend()]]},refixAxisShape:function(component){for(var zeroX,zeroY,axis,axisList=component.xAxis._axisList.concat(component.yAxis?component.yAxis._axisList:[]),len=axisList.length;len--;){axis=axisList[len];axis.type==ecConfig.COMPONENT_TYPE_AXIS_VALUE&&axis._min<0&&axis._max>=0&&(axis.isHorizontal()?zeroX=axis.getCoord(0):zeroY=axis.getCoord(0))}if("undefined"!=typeof zeroX||"undefined"!=typeof zeroY){len=axisList.length;for(;len--;)axisList[len].refixAxisShape(zeroX,zeroY)}},refresh:function(newOption){if(newOption||this._zrWidth!=this.zr.getWidth()||this._zrHeight!=this.zr.getHeight()){this.clear();this.option=newOption||this.option;this.option.grid=this.reformOption(this.option.grid);var gridOption=this.option.grid;this._zrWidth=this.zr.getWidth();this._zrHeight=this.zr.getHeight();this._x=this.parsePercent(gridOption.x,this._zrWidth);this._y=this.parsePercent(gridOption.y,this._zrHeight);var x2=this.parsePercent(gridOption.x2,this._zrWidth),y2=this.parsePercent(gridOption.y2,this._zrHeight);"undefined"==typeof gridOption.width?this._width=this._zrWidth-this._x-x2:this._width=this.parsePercent(gridOption.width,this._zrWidth);this._width=this._width<=0?10:this._width;"undefined"==typeof gridOption.height?this._height=this._zrHeight-this._y-y2:this._height=this.parsePercent(gridOption.height,this._zrHeight);this._height=this._height<=0?10:this._height;this._x=this.subPixelOptimize(this._x,gridOption.borderWidth);this._y=this.subPixelOptimize(this._y,gridOption.borderWidth);this.shapeList.push(new RectangleShape({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._x,y:this._y,width:this._width,height:this._height,brushType:gridOption.borderWidth>0?"both":"fill",color:gridOption.backgroundColor,strokeColor:gridOption.borderColor,lineWidth:gridOption.borderWidth}}));this.zr.addShape(this.shapeList[0])}}};zrUtil.inherits(Grid,Base);require("../component").define("grid",Grid);return Grid});